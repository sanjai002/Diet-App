{% extends 'base.html' %}

{% block body %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          Profile Management
        </div>
        <div class="card-body">
          <form method="POST" action="{% url 'profile' %}">
            {% csrf_token %}
            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <input type="text" class="form-control" id="username" name="username" value="{{ user.username }}" disabled>
            </div>
            
            <div class="mb-3">
              <label for="age" class="form-label">Age</label>
              <input type="number" class="form-control" id="age" name="age" value="{{ user_details.age }}">
            </div>
            <div class="mb-3">
              <label for="height" class="form-label">Height</label>
              <input type="number" class="form-control" id="height" name="height" value="{{ user_details.height }}">
            </div>
            <div class="mb-3">
              <label for="weight" class="form-label">Weight</label>
              <input type="number" class="form-control" id="weight" name="weight" value="{{ user_details.weight }}">
            </div>
            <div class="mb-3">
              <label for="gender" class="form-label">Gender</label>
              <select class="form-select" id="gender" name="gender">
                <option value="male" {% if user_details.gender == "male" %} selected {% endif %}>Male</option>
                <option value="female" {% if user_details.gender == "female" %} selected {% endif %}>Female</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="goal" class="form-label">Goal</label>
              <select class="form-select" id="goal" name="goal">
                <option value="Weight Loss" {% if user_details.goal == "Weight Loss" %} selected {% endif %}>Weight Loss</option>
                <option value="Weight Maintain" {% if user_details.goal == "Weight Maintain" %} selected {% endif %}>Weight Maintain</option>
                <option value="Weight Gain" {% if user_details.goal == "Weight Gain" %} selected {% endif %}>Weight Gain</option>
              </select>
              </div>
              <div class="mb-3">
                <label for="goal" class="form-label">Activity Level</label>
              <select id="activityLevel" name="activity" class="form-control" required>
                <option value="1.2 " selected>Sedentary (little or no exercise)</option>
                <option value="1.55">Lightly Active (light exercise/sports 1-3 days/week)</option>
                <option value="1.725">Moderately Active (moderate exercise/sports 3-5 days/week)</option>
                <option value="1.9">Very Active (hard exercise/sports 6-7 days a week)</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary">Update Profile</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="row justify-content-center mt-3">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          Change Password
        </div>
        <div class="card-body">
          <form method="POST" action="{% url 'change_password' %}">
            {% csrf_token %}
            <div class="mb-3">
              <label for="old_password" class="form-label">Old Password</label>
              <input type="password" class="form-control" id="old_password" name="old_password">
            </div>
            <div class="mb-3">
              <label for="new_password1" class="form-label">New Password</label>
              <input type="password" class="form-control" id="new_password1" name="new_password1">
            </div>
            <div class="mb-3">
              <label for="new_password2" class="form-label">Confirm New Password</label>
              <input type="password" class="form-control" id="new_password2" name="new_password2">
            </div>
            <button type="submit" class="btn btn-primary">Change Password</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% if messages %}
  <script>
    {% for message in messages %}
      alert("{{ message }}");
    {% endfor %}
  </script>
{% endif %}
{% endblock %}
